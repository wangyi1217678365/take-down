# 单页面（SPA）
> 只有一个html页面的应用，页面url变化不会触发页面刷新，会根据url动态刷新局部资源 ，公共资源(js、css等)仅需加载一次。对于 SPA 来说，页面的切换就是局部组件或视图之间的切换
## 原理
### hash 模式
> 使用 URL 的 hash 来模拟一个完整的 URL， hash 会拼接到地址的 # 号后面。当 URL 改变时，页面不会重新加载。每次 hash 值的变化，还会触发hashchange 这个事件，通过这个事件我们就可以知道 hash 值发生了哪些变化。然后我们便可以监听hashchange来实现更新页面部分内容的操作

### history 模式
> 因为HTML5标准发布。多了两个 API，pushState 和 replaceState，通过这两个 API 可以改变 url 地址且不会发送请求。同时还有popstate 事件。通过这些就能用另一种方式来实现前端路由了，但原理都是跟 hash 实现相同的。用了 HTML5 的实现，单页路由的 url 就不会多出一个#，变得更加美观。但因为没有 # 号，所以当用户刷新页面之类的操作时，浏览器还是会给服务器发送请求。为了避免出现这种情况，所以这个实现需要服务器的支持，需要把所有路由都重定向到根页面。
### hash vs history
1. hash 模式下地址栏会有 # 号，history 模式则没有
2. 由于 history 模式下地址栏没有 # 号 所以导致刷新页面会向服务器发起页面请求，但是由于是单页面应用所以只有一个根页面，所以会返回404。解决这个问题需要在服务端增加一个覆盖所有情况的候选资源：如果 URL 匹配不到任何静态资源，则应该返回根页面，有前端监通过js判断当前history路由，选择加载对应的资源。
3. 当地址栏发生变化，hash 模式监听的是 hashchange 事件，而 history 模式监听的是 popstate 事件。

## 优缺点
### 优点
- 页面切换快：页面每次切换跳转时，并不需要做html文件的请求，这样就节约了很多http发送时延，我们在切换页面的时候速度很快。
- 用户体验好：页面片段间的切换快，包括移动设备, 尤其是在网络环境差的时候, 因为组件已经预先加载好了, 并不需要发送网络请求, 所以用户体验好
### 缺点
- 首屏加载速度慢：首屏时需要请求一次html，同时还要发送一次js请求，两次请求回来了，首屏才会展示出来。相对于多页应用，首屏时间慢。
- 不宜于SEO：因为搜索引擎只认识html里的内容，不认识js的内容，而单页应用的内容都是靠js渲染生成出来的，搜索引擎不识别这部分内容，也就不会给一个好的排名，会导致SPA应用做出来的网页在百度和谷歌上的排名差。
## [实现](../write-practise-js/8.webRoute.js)

# 多页面（MPA）
> 指多个独立页面，页面跳转会刷新页面资源，公共资源(js、css等)会选择性重新加载。与 SPA 对比最大的不同即是页面路由切换由原生浏览器文档跳转控制。 页面跳转，是返回 HTML 的。
## 优点
- 首屏加载速度快：当我们访问页面的时候，服务器返回一个html，页面就会展示出来，这个过程只经历了一个HTTP请求，所以页面展示的速度非常快
- SEO效果好：搜索引擎在做网页排名的时候，要根据网页的内容才能给网页权重，来进行网页的排名。搜索引擎是可以识别html内容的，而我们每个页面所有的内容都放在html中，所以这种多页应用SEO排名效果好。
## 缺点
- 页面切换慢：因为每次跳转都需要发送一个 HTTP 请求，如果网络状态不好，在页面之间来回跳转时，就会发生明显的卡顿，影响用户体验。
- 用户体验不佳：如果网络慢,页面很容易半天加载不出来,用户体验非常不好

# SPA vs MPA
![SPA和MPA对比](https://cdn.jsdelivr.net/gh/wangyi1217678365/yi-image-host/SPA和MPA对比.awebp)
